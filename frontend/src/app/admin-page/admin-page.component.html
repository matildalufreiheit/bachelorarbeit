<div class="container m-4">
  <!-- Login-Bereich -->
  <div *ngIf="!isLoggedIn">
    <h2>{{ 'LOGIN.TITLE' | translate }}</h2>
    <form (ngSubmit)="login(username.value, password.value)" class="border p-4 rounded shadow-sm">
      <div class="mb-3">
        <label for="username" class="form-label">{{ 'LOGIN.USERNAME_LABEL' | translate }}</label>
        <input id="username" type="text" class="form-control" #username />
      </div>
      <div class="mb-3">
        <label for="password" class="form-label">{{ 'LOGIN.PASSWORD_LABEL' | translate }}</label>
        <input id="password" type="password" class="form-control" #password />
      </div>
      <button type="submit" class="btn btn-primary w-100">{{ 'LOGIN.SUBMIT_BUTTON' | translate }}</button>
    </form>
  </div>

  <!-- Admin-Bereich -->
  <div *ngIf="isLoggedIn">
    <h3>{{ 'ADMIN.WELCOME' | translate }}</h3>
    <button (click)="logout()" class="btn btn-danger mb-4">{{ 'ADMIN.LOGOUT_BUTTON' | translate }}</button>

    <!-- Aktionswahl -->
    <div class="mb-4">
      <label class="form-label">{{ 'ADMIN.CHOOSE_ACTION' | translate }}</label>
      <div class="btn-group w-100" role="group">
        <button type="button" class="btn btn-outline-primary" (click)="setMode('neu')">{{ 'ADMIN.NEW_BUTTON' | translate }}</button>
        <button type="button" class="btn btn-outline-primary" (click)="setMode('ändern')">{{ 'ADMIN.EDIT_BUTTON' | translate }}</button>
        <button type="button" class="btn btn-outline-primary" (click)="setMode('löschen')">{{ 'ADMIN.DELETE_BUTTON' | translate }}</button>
        <button type="button" class="btn btn-outline-primary" (click)="setMode('neuerBenutzer')">{{ 'ADMIN.MANAGE_USERS_BUTTON' | translate }}</button>
      </div>
    </div>

    <!-- Modus: Neuer Benutzer -->
    <div *ngIf="mode === 'neuerBenutzer'">
      <h2>{{ 'USER_MANAGEMENT.NEW_USER_TITLE' | translate }}</h2>
      <form (ngSubmit)="register(regUsername.value, regPassword.value)" class="border p-4 rounded shadow-sm">
        <div class="mb-3">
          <label for="regUsername" class="form-label">{{ 'LOGIN.USERNAME_LABEL' | translate }}</label>
          <input id="regUsername" type="text" class="form-control" #regUsername required />
        </div>
        <div class="mb-3">
          <label for="regPassword" class="form-label">{{ 'LOGIN.PASSWORD_LABEL' | translate }}</label>
          <input id="regPassword" type="password" class="form-control" #regPassword required />
        </div>
        <button type="submit" class="btn btn-primary w-100">{{ 'USER_MANAGEMENT.REGISTER_BUTTON' | translate }}</button>
      </form>
      <div>
        <h2>{{ 'USER_MANAGEMENT.DELETE_USER_TITLE' | translate }}</h2>
        <mat-form-field appearance="fill" class="w-100 mb-3">
          <mat-label>{{ 'USER_MANAGEMENT.SELECT_USER_LABEL' | translate }}</mat-label>
          <mat-select [(value)]="selectedUserId">
            <mat-option *ngFor="let user of users" [value]="user.ID">
              {{ user.Benutzername }}
            </mat-option>
          </mat-select>
        </mat-form-field>
        <button
          type="button"
          class="btn btn-danger"
          (click)="deleteUser(selectedUserId)"
          [disabled]="!selectedUserId"
        >
          {{ 'USER_MANAGEMENT.DELETE_USER_BUTTON' | translate }}
        </button>
      </div>
    </div>

    <!-- Modus: Neu -->
    <div *ngIf="mode === 'neu'">
      <h2>{{ 'OFFER_MANAGEMENT.NEW_OFFER_TITLE' | translate }}</h2>
      <form (ngSubmit)="createAngebot(name.value, description.value, url.value)" class="border p-4 rounded shadow-sm">
        <div class="mb-3">
          <label for="name" class="form-label">{{ 'OFFER_MANAGEMENT.NAME_LABEL' | translate }}</label>
          <input id="name" type="text" class="form-control" #name />
        </div>
        <div class="mb-3">
          <label for="description" class="form-label">{{ 'OFFER_MANAGEMENT.DESCRIPTION_LABEL' | translate }}</label>
          <textarea id="description" class="form-control" #description></textarea>
        </div>
        <div class="mb-3">
          <label for="url" class="form-label">{{ 'OFFER_MANAGEMENT.URL_LABEL' | translate }}</label>
          <input id="url" type="url" class="form-control" #url placeholder="https://example.com" />
        </div>

        <div class="mb-4">
          <mat-form-field appearance="fill" class="w-100">
            <mat-label>{{ 'OFFER_MANAGEMENT.NEW_TAG_TITLE' | translate }}</mat-label>
            <mat-select multiple [(value)]="selectedTags">
              <mat-option *ngFor="let tag of tags" [value]="tag.ID">{{ tag.Tag }}</mat-option>
            </mat-select>
          </mat-form-field>
        </div>

        <div class="mb-4">
          <mat-form-field appearance="fill" class="w-100">
            <mat-label>{{ 'OFFER_MANAGEMENT.NEW_GROUP_TITLE' | translate }}</mat-label>
            <mat-select multiple [(value)]="selectedZielgruppen">
              <mat-option *ngFor="let zielgruppe of zielgruppen" [value]="zielgruppe.ID">{{ zielgruppe.Name }}</mat-option>
            </mat-select>
          </mat-form-field>
        </div>

        <div class="mb-4">
          <mat-form-field appearance="fill" class="w-100">
            <mat-label>{{ 'OFFER_MANAGEMENT.CREATE_BUTTON' | translate }}</mat-label>
            <mat-select multiple [(value)]="selectedArt">
              <mat-option *ngFor="let art of arten" [value]="art.ID">{{ art.Art }}</mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        <button type="submit" class="btn btn-success w-100">{{ 'OFFER_MANAGEMENT.CREATE_BUTTON' | translate }}</button>
      </form>

      <div class="mt-5">
        <h2>{{ 'OFFER_MANAGEMENT.NEW_TAG_TITLE' | translate }}</h2>
        <form (ngSubmit)="addTag()">
          <div class="input-group mb-3">
            <input
              type="text"
              [(ngModel)]="newTag"
              name="newTag"
              placeholder="{{ 'OFFER_MANAGEMENT.NEW_TAG_PLACEHOLDER' | translate }}"
              class="form-control"
              required
            />
            <button type="submit" class="btn btn-success">{{ 'OFFER_MANAGEMENT.CREATE_TAG_BUTTON' | translate }}</button>
          </div>
        </form>
      </div>

      <div class="mt-5">
        <h2>{{ 'OFFER_MANAGEMENT.NEW_GROUP_TITLE' | translate }}</h2>
        <form (ngSubmit)="addZielgruppe()">
          <div class="input-group mb-3">
            <input
              type="text"
              [(ngModel)]="newZielgruppe"
              name="newZielgruppe"
              placeholder="{{ 'OFFER_MANAGEMENT.NEW_GROUP_PLACEHOLDER' | translate }}"
              class="form-control"
              required
            />
            <button type="submit" class="btn btn-success">{{ 'OFFER_MANAGEMENT.CREATE_GROUP_BUTTON' | translate }}</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Restliche Modi analog mit Übersetzungen versehen -->

    <div class="mt-3">
      <button routerLink="/" class="btn btn-outline-primary">{{ 'COMMON.BACK_TO_HOME_BUTTON' | translate }}</button>
    </div>
  </div>
</div>
